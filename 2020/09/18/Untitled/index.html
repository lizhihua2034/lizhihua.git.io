<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="icon" href="https://s1.ax1x.com/2020/09/19/w5yggg.png?v=2.1.1" type="image/png" sizes="16x16"><link rel="icon" href="https://s1.ax1x.com/2020/09/19/w5yggg.png?v=2.1.1" type="image/png" sizes="32x32"><meta name="description" content="Spring 注解驱动开发【属性赋值】">
<meta property="og:type" content="article">
<meta property="og:title" content="【Spring注解】01-组件注册">
<meta property="og:url" content="https://zhihuali.cn/2020/09/18/Untitled/index.html">
<meta property="og:site_name">
<meta property="og:description" content="Spring 注解驱动开发【属性赋值】">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:/Users/zhihua.Li/AppData/Roaming/Typora/typora-user-images/image-20200916233646993.png">
<meta property="article:published_time" content="2020-09-18T01:07:00.000Z">
<meta property="article:modified_time" content="2020-09-29T11:28:55.983Z">
<meta property="article:author" content="Zhihua Li">
<meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/zhihua.Li/AppData/Roaming/Typora/typora-user-images/image-20200916233646993.png"><title>【Spring注解】01-组件注册 | </title><link ref="canonical" href="https://zhihuali.cn/2020/09/18/Untitled/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/index.css?v=2.1.1"><script>var Stun = window.Stun || {};
var CONFIG = {
  root: '/',
  algolia: undefined,
  fontIcon: {"prompt":{"success":"fas fa-check-circle","info":"fas fa-arrow-circle-right","warning":"fas fa-exclamation-circle","error":"fas fa-times-circle"},"copyBtn":"fas fa-copy"},
  sidebar: {"offsetTop":"20px","tocMaxDepth":6},
  header: {"enable":true,"showOnPost":true,"scrollDownIcon":false},
  postWidget: {"endText":true},
  nightMode: {"enable":true},
  back2top: {"enable":true},
  codeblock: {"style":"default","highlight":"light","wordWrap":false},
  reward: false,
  fancybox: false,
  zoomImage: {"gapAside":"20px"},
  galleryWaterfall: undefined,
  lazyload: false,
  pjax: undefined,
  externalLink: {"icon":{"enable":true,"name":"fas fa-external-link-alt"}},
  shortcuts: undefined,
  prompt: {"copyButton":"Copy","copySuccess":"Copy Success","copyError":"Copy Error"},
  sourcePath: {"js":"js","css":"css","images":"images"},
};

window.CONFIG = CONFIG;</script><meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
</head><body><div class="container" id="container"><header class="header" id="header"><div class="header-inner"><nav class="header-nav header-nav--fixed"><div class="header-nav-inner"><div class="header-nav-menubtn"><i class="fas fa-bars"></i></div><div class="header-nav-menu"><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/"><span class="header-nav-menu-item__icon"><i class="fas fa-home"></i></span><span class="header-nav-menu-item__text">menu.主页</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/archives/"><span class="header-nav-menu-item__icon"><i class="fas fa-folder-open"></i></span><span class="header-nav-menu-item__text">menu.时间轴</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/categories/"><span class="header-nav-menu-item__icon"><i class="fas fa-layer-group"></i></span><span class="header-nav-menu-item__text">menu.分类</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/tags/"><span class="header-nav-menu-item__icon"><i class="fas fa-tags"></i></span><span class="header-nav-menu-item__text">menu.标签</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/link/"><span class="header-nav-menu-item__icon"><i class="fas fa-link"></i></span><span class="header-nav-menu-item__text">menu.友链</span></a></div><div class="header-nav-menu-item"><a class="header-nav-menu-item__link" href="/about/"><span class="header-nav-menu-item__icon"><i class="fas fa-heart"></i></span><span class="header-nav-menu-item__text">menu.关于</span></a></div></div><div class="header-nav-mode"><div class="mode"><div class="mode-track"><span class="mode-track-moon"></span><span class="mode-track-sun"></span></div><div class="mode-thumb"></div></div></div></div></nav><div class="header-banner"><div class="header-banner-info"><div class="header-banner-info__title"></div><div class="header-banner-info__subtitle"></div></div></div></div></header><main class="main" id="main"><div class="main-inner"><div class="content-wrap" id="content-wrap"><div class="content" id="content"><!-- Just used to judge whether it is an article page--><div id="is-post"></div><div class="post"><header class="post-header"><h1 class="post-title">【Spring注解】01-组件注册</h1><div class="post-meta"><span class="post-meta-item post-meta-item--createtime"><span class="post-meta-item__icon"><i class="far fa-calendar-plus"></i></span><span class="post-meta-item__info">Created</span><span class="post-meta-item__value">2020-09-18</span></span><span class="post-meta-item post-meta-item--updatetime"><span class="post-meta-item__icon"><i class="far fa-calendar-check"></i></span><span class="post-meta-item__info">Updated</span><span class="post-meta-item__value">2020-09-29</span></span></div></header><div class="post-body">
        <h1 id="Spring-注解驱动开发【属性赋值】"   >
          <a href="#Spring-注解驱动开发【属性赋值】" class="heading-link"><i class="fas fa-link"></i></a>Spring 注解驱动开发【属性赋值】</h1>
      <a id="more"></a>
<ol>
<li><p><strong>组件注册 @Configuration&amp;@Bean给容器中注册组件</strong></p>
<ul>
<li>自定义配置类 MyConfig </li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.zhihuali.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> indi.zhihuali.pojo.Person;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  配置类 &lt;=&gt; 配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">//声明spring配置类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment">//    @Bean 后面也可以加一个参数 作为bean的id 下面的方法名则被覆盖</span></span><br><span class="line">    <span class="meta">@Bean(&quot;person&quot;)</span></span><br><span class="line">    <span class="comment">// 给容器中注册一个bean 返回类型为bean的类型 方法名为bean的id</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;zhihuali&quot;</span>,<span class="number">20</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li>Test类中测试ioc注入情况</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//        通过注解（自定义配置类 @Configuration) 对ioc容器进行bean注入</span></span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);</span><br><span class="line"><span class="comment">//        获取ioc容器中的bean对象并实例化</span></span><br><span class="line">        Person person = context.getBean(Person.class);</span><br><span class="line">         System.out.println(person);</span><br><span class="line"><span class="comment">//        遍历获取类型为Person的组件在ioc容器中的id是什么</span></span><br><span class="line">        String[] beanNamesForType = context.getBeanNamesForType(Person.class);</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">for</span> (String name : beanNamesForType) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></div></figure>
</li>
<li><p><strong>组件注册 @ComponentScan 自动扫描组件及指定扫描规则</strong></p>
</li>
</ol>
<ul>
<li>在自定义配置类中定义@ComponentScan(value=扫描的包)</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>   <span class="comment">//声明spring配置类</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;indi.zhihuali&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>分别生成组件注解（ controller层对应@Controller、mapper层对应@Repository、service层对应@Service 及 @Component）</p>
</li>
<li><p>通过测试类对ioc容器中的组件进行扫描测试</p>
</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);</span><br><span class="line"><span class="comment">//        查看ioc容器中具有哪些组件</span></span><br><span class="line"><span class="comment">//        context.getBeanDefinitionNames() 方法返回容器中所有注册了的bean的名字</span></span><br><span class="line">        String[] beanDefinitionNames = context.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String beanDefinitionName : beanDefinitionNames) &#123;</span><br><span class="line">            System.out.println(beanDefinitionName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<p>输出结果为：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">myConfig 配置类<span class="meta">@Configuration</span>本身就是一个<span class="meta">@Component</span></span><br><span class="line">bookController</span><br><span class="line">bookMapper</span><br><span class="line">bookService</span><br><span class="line">person    通过<span class="meta">@Bean</span>注册进ioc容器</span><br></pre></td></tr></table></div></figure>

<ul>
<li>在@ComponentScan中添加参数 excludeFilters (除掉哪些bean) 或 includeFilters(包含哪些bean)</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>   <span class="comment">//声明spring配置类</span></span><br><span class="line"><span class="comment">//  @ComponentScan  value：指定要扫描的包</span></span><br><span class="line"><span class="comment">//  excludeFilters 返回 Filter[] 是数组</span></span><br><span class="line"><span class="comment">//  @ComponentScan.Filter</span></span><br><span class="line"><span class="comment">//  (type = FilterType.ANNOTATION   根据注解进行过滤</span></span><br><span class="line"><span class="comment">//   classes = &#123;Controller.class, Service.class&#125;    具体要过滤的是哪些类 @Controller对应Controller.class</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;indi.zhihuali&quot;,excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan.Filter(type = FilterType.ANNOTATION,classes = &#123;Controller.class, Service.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>添加了excludeFilters后的运行结果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myConfig    配置类<span class="meta">@Configuration</span>本身就是一个<span class="meta">@Component</span></span><br><span class="line">bookMapper</span><br><span class="line">person    通过<span class="meta">@Bean</span>注册进ioc容器</span><br></pre></td></tr></table></div></figure>

<ul>
<li>将@ComponentScan内参数修改为includeFilter</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan(value = &quot;indi.zhihuali&quot;,includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan.Filter(type = FilterType.ANNOTATION,classes = &#123;Controller.class, Service.class&#125;)</span></span><br><span class="line"><span class="meta">    &#125;</span></span><br><span class="line"><span class="meta">// 想要设置为只包含什么什么的过滤器 首先要将默认的过滤器关掉 </span></span><br><span class="line"><span class="meta">               ,userDefaultFilters = false</span></span><br><span class="line"><span class="meta">               </span></span><br><span class="line"><span class="meta">          </span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></div></figure>

<p>组件扫描器可以指定多个 且互补配置</p>
<p>同样可以通过@ComponentScans进行配置 且value为数组 值为@ComponentScan</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScans(value = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan(value = &quot;indi.zhihuali&quot;,includeFilters = &#123;</span></span><br><span class="line"><span class="meta">                @ComponentScan.Filter(type = FilterType.ANNOTATION,classes = &#123;Controller.class, Service.class&#125;)</span></span><br><span class="line"><span class="meta">        &#125;,useDefaultFilters = false</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li><strong>组件注册 自定义TypeFilter指定过滤规则</strong></li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  @ComponentScan  value：指定要扫描的包</span></span><br><span class="line"><span class="comment">//  excludeFilters 返回 Filter[] 是数组  指定扫描时按什么规则排除哪些组件</span></span><br><span class="line"><span class="comment">//  includeFilters 指定扫描时只需要包含哪些组件</span></span><br><span class="line"><span class="comment">//  (type = FilterType.ANNOTATION   根据注解进行过滤</span></span><br><span class="line"><span class="comment">//          FilterType.ASSIGNABLE_TYPE 根据指定类型进行过滤</span></span><br><span class="line"><span class="comment">//          FilterType.ASPECTJ  根据ASPECTJ表达式</span></span><br><span class="line"><span class="comment">//          FilterType.REGEX    根据正则表达式</span></span><br><span class="line"><span class="comment">//          FilterType.CUSTOM  自定义过滤规则</span></span><br><span class="line"><span class="comment">//    ，</span></span><br><span class="line"><span class="comment">//   classes = &#123;Controller.class, Service.class&#125;    具体要过滤的是哪些类 @Controller对应Controller.class</span></span><br></pre></td></tr></table></div></figure>

<ul>
<li>重点是 采用自定义FilterType.CUSTOM进行过滤</li>
</ul>
<ol>
<li>编写自定义过滤类</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyTypeFilter</span> <span class="keyword">implements</span> <span class="title">TypeFilter</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    MetadataReader  读取到的当前正在扫描的类的信息</span></span><br><span class="line"><span class="comment">    MetadataReaderFactory   可以获取到其他任何类信息</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"><span class="comment">//        获取当前类注解的信息</span></span><br><span class="line">        AnnotationMetadata annotationMetadata = metadataReader.getAnnotationMetadata();</span><br><span class="line"><span class="comment">//       获取当前类资源（类路径）</span></span><br><span class="line">        Resource resource = metadataReader.getResource();</span><br><span class="line"><span class="comment">//        获取当前正在扫描的类的类信息</span></span><br><span class="line">        ClassMetadata classMetadata = metadataReader.getClassMetadata();</span><br><span class="line">       </span><br><span class="line"><span class="comment">//        对当前类的类信息进行打印</span></span><br><span class="line">        String className = classMetadata.getClassName();</span><br><span class="line">        System.out.println(classMetadata);</span><br><span class="line">        System.out.println(annotationMetadata);</span><br><span class="line">        System.out.println(resource);</span><br><span class="line">        System.out.println(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"><span class="comment">//        若类名中包含er则放行 不包含则拦截</span></span><br><span class="line">        <span class="keyword">if</span>(className.contains(<span class="string">&quot;er&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ol start="2">
<li>在配置类中添加自定义typefilter的信息</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScans(value = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan(value = &quot;indi.zhihuali&quot;,includeFilters = &#123;</span></span><br><span class="line"><span class="meta">                @ComponentScan.Filter(type = FilterType.CUSTOM,classes = MyTypeFilter.class)</span></span><br><span class="line"><span class="meta">        &#125;,useDefaultFilters = false</span></span><br><span class="line"><span class="meta">        )</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></div></figure>

<ol start="3">
<li>编写测试方法对ioc容器中对象进行打印</li>
</ol>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig.class);</span><br><span class="line"><span class="comment">//        查看ioc容器中具有哪些组件</span></span><br><span class="line">        String[] beanDefinitionNames = context.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String beanDefinitionName : beanDefinitionNames) &#123;</span><br><span class="line">            System.out.println(beanDefinitionName);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



<p>打印结果为</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@d282e0</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@d282e0</span><br><span class="line">file [D:\java space_idea\Spring-Anno\target\classes\indi\zhihuali\config\MyTypeFilter.class]</span><br><span class="line">--------------------------------</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@438a68</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@438a68</span><br><span class="line">file [D:\java space_idea\Spring-Anno\target\classes\indi\zhihuali\controller\bookController.class]</span><br><span class="line">--------------------------------</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1d15f18</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1d15f18</span><br><span class="line">file [D:\java space_idea\Spring-Anno\target\classes\indi\zhihuali\mapper\bookMapper.class]</span><br><span class="line">--------------------------------</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1695df3</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1695df3</span><br><span class="line">file [D:\java space_idea\Spring-Anno\target\classes\indi\zhihuali\pojo\Person.class]</span><br><span class="line">--------------------------------</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1ea5ab4</span><br><span class="line">org.springframework.core.type.classreading.SimpleAnnotationMetadata@1ea5ab4</span><br><span class="line">file [D:\java space_idea\Spring-Anno\target\classes\indi\zhihuali\service\bookService.class]</span><br><span class="line">--------------------------------</span><br><span class="line">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalCommonAnnotationProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerFactory</span><br><span class="line">myConfig</span><br><span class="line">myTypeFilter</span><br><span class="line">bookController</span><br><span class="line">bookMapper</span><br><span class="line">person</span><br><span class="line">bookService</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>


        <h4 id="注：注解扫描指定包下的所有类-如果满足放行条件则进行放行-否则就拦截"   >
          <a href="#注：注解扫描指定包下的所有类-如果满足放行条件则进行放行-否则就拦截" class="heading-link"><i class="fas fa-link"></i></a>注：注解扫描指定包下的所有类 如果满足放行条件则进行放行 否则就拦截</h4>
      <ol start="4">
<li><strong>组件注册 @Scope 设置组件作用域</strong></li>
</ol>
<p>@Scope可选参数值</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> /*</span><br><span class="line">     * @see ConfigurableBeanFactory#SCOPE_PROTOTYPE</span><br><span class="line">     * @see ConfigurableBeanFactory#SCOPE_SINGLETON</span><br><span class="line">     * @see org.springframework.web.context.WebApplicationContext#SCOPE_REQUEST</span><br><span class="line">     * @see org.springframework.web.context.WebApplicationContext#SCOPE_SESSION</span><br><span class="line">     </span><br><span class="line">     * value 的四种取值 ：</span><br><span class="line">     * prototype   多实例</span><br><span class="line">     * singleton   单例 【默认】</span><br><span class="line">     * request     同一次请求 创建一次实例 【web环境】</span><br><span class="line">     * session     同一个session创建一个实例 【web环境】</span><br><span class="line">   </span><br><span class="line">*/</span><br></pre></td></tr></table></div></figure>

<p>在没有显式配置Scope时 默认单例模式 </p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean(value = &quot;person&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;给容器添加Person...&quot;</span>);    <span class="comment">//看何时进行实例化Person对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;wangjingbo&quot;</span>,<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig2.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>输出：</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">给容器添加Person...</span><br></pre></td></tr></table></div></figure>

<p>通过上例可证明 默认情况下 （单例bean时），在创建Ioc容器时就自动生成bean对象 即用即取</p>
<p>给bean配置作用域</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean(value = &quot;person&quot;)</span></span><br><span class="line">    <span class="meta">@Scope(value = &quot;prototype&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;wangjingbo&quot;</span>,<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig2.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>打印结果：空</p>
<p>说明多实例情况下 ioc容器启动时并不会去调用构造器创建对象并放在容器中</p>
<p>那么何时调用呢？ 其实是在getBean时调用！</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(MyConfig2.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;ioc容器初始化完成&quot;</span>);</span><br><span class="line">        Object person = context.getBean(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ioc容器初始化完成</span><br><span class="line">给容器添加Person...</span><br></pre></td></tr></table></div></figure>

<p>若获取多个对象 则调用多次</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object person = context.getBean(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">Object person1 = context.getBean(<span class="string">&quot;person&quot;</span>);</span><br></pre></td></tr></table></div></figure>

<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ioc容器初始化完成</span><br><span class="line">给容器添加Person...</span><br><span class="line">给容器添加Person...</span><br></pre></td></tr></table></div></figure>



<ol start="5">
<li><strong>组件注册 @Lazy 懒加载bean 【针对@Scope(“singleton”)】</strong></li>
</ol>
<p>默认情况下 单例模式下添加bean会在创建Ioc容器时提前自动生成bean对象</p>
<p>通过添加@Lazy 可以达到在创建ioc容器时不再提前自动生成bean对象 而用时生成的效果</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean(value = &quot;person&quot;)</span></span><br><span class="line"><span class="meta">@Lazy</span>   <span class="comment">//  懒加载</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;给容器添加Person...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;wangjingbo&quot;</span>,<span class="number">12</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>



<ol start="6">
<li><strong>组建注册 @Conditional 按照条件注册bean</strong></li>
</ol>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@Conditional(&#123;condition数组&#125;)：按照一定的条件进行判断 满足条件给容器中注册bean</span><br><span class="line">例如：如果系统是 windows 给容器中注册 bill</span><br><span class="line">        如果系统是 linux 给容器中注册 linus</span><br></pre></td></tr></table></div></figure>

<p>将注解标注在方法上 对单一bean进行condition判断</p>
<p>将注解标注在类上 满足当前条件 类中的任何bean注册才会生效 类中组件统一设置</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *   @Conditional(&#123;condition数组&#125;)：按照一定的条件进行判断 满足条件给容器中注册bean</span></span><br><span class="line"><span class="comment">    *   例如：如果系统是 windows 给容器中注册 bill</span></span><br><span class="line"><span class="comment">    *        如果系统是 linux 给容器中注册 linus</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="meta">@Conditional(&#123;LinuxCondition.class&#125;)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;linus&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;Linus&quot;</span>,<span class="number">22</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Conditional(&#123;WindowsCondition.class&#125;)</span></span><br><span class="line">    <span class="meta">@Bean(&quot;bill&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">person02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">&quot;Bill&quot;</span>,<span class="number">27</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>编写：LinuxCondition.class实现Condition接口</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinuxCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * ConditionContext 判断条件能使用的上下文环境</span></span><br><span class="line"><span class="comment">    * AnnotatedTypeMetadata 注释信息</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        判断是否linux系统:</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">//        1.能获取到ioc使用的beanfactory</span></span><br><span class="line">        ConfigurableListableBeanFactory beanFactory = context.getBeanFactory();</span><br><span class="line"><span class="comment">//        2.获取类加载器</span></span><br><span class="line">        ClassLoader classLoader = context.getClassLoader();</span><br><span class="line"><span class="comment">//        3.获取当前环境信息</span></span><br><span class="line">        Environment environment = context.getEnvironment();</span><br><span class="line"><span class="comment">//        4.获取到bean定义的注册类</span></span><br><span class="line">        BeanDefinitionRegistry registry = context.getRegistry();</span><br><span class="line"></span><br><span class="line"><span class="comment">//        Condition可以判断的东西有很多：</span></span><br><span class="line"><span class="comment">//        可以通过下面的方法判断容器中是否包含名为person的bean </span></span><br><span class="line"><span class="comment">//        也可以通过一些方法注册bean等等</span></span><br><span class="line">        <span class="keyword">boolean</span> person = registry.containsBeanDefinition(<span class="string">&quot;person&quot;</span>);</span><br><span class="line">        </span><br><span class="line"><span class="comment">//        通过environment.getProperty(&quot;os.name&quot;)方法可以查看当前操作系统信息</span></span><br><span class="line">        String property = environment.getProperty(<span class="string">&quot;os.name&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(property.contains(<span class="string">&quot;Linux&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>

<p>WindowsCondition.class 实现Condition接口</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WindowsCondition</span> <span class="keyword">implements</span> <span class="title">Condition</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">matches</span><span class="params">(ConditionContext context, AnnotatedTypeMetadata metadata)</span> </span>&#123;</span><br><span class="line">        Environment environment = context.getEnvironment();</span><br><span class="line">        String property = environment.getProperty(<span class="string">&quot;os.name&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(property.contains(<span class="string">&quot;Windows&quot;</span>))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>默认情况下操作系统为Windows10 所以会满足WindowsCondition的条件 即注入bill</p>
<p>进行测试</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent03</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="comment">//          动态获取环境变量的值 操作系统值：windows 10</span></span><br><span class="line">        ConfigurableEnvironment environment = (ConfigurableEnvironment) context.getEnvironment();</span><br><span class="line">        String property = environment.getProperty(<span class="string">&quot;os.name&quot;</span>);</span><br><span class="line">        System.out.println(property);</span><br><span class="line"></span><br><span class="line"><span class="comment">//        1、获取Person类bean对象的名字并遍历输出</span></span><br><span class="line">        String[] beanNamesForType = context.getBeanNamesForType(Person.class);</span><br><span class="line">        <span class="keyword">for</span> (String name : beanNamesForType) &#123;</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//        2、获取Person类bean对象并输出</span></span><br><span class="line">        Map&lt;String, Person&gt; persons = context.getBeansOfType(Person.class);</span><br><span class="line">        System.out.println(persons);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<p>输出：</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Windows 10</span><br><span class="line">bill</span><br><span class="line">&#123;bill=Person(name=Bill, age=27)&#125;</span><br></pre></td></tr></table></div></figure>

<p>可以通过editConfigurations</p>
<p><img src="C:\Users\zhihua.Li\AppData\Roaming\Typora\typora-user-images\image-20200916233646993.png" alt="image-20200916233646993"></p>
<p>给虚拟机设置参数 达到修改os.name的效果从而使LinuxCondition生效而注入linus bean对象 测试同上</p>
<p>结果：</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">linux</span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></div></figure>



<ol start="7">
<li><strong>组件注册 @Import 给容器中快速导入一个组件</strong></li>
</ol>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">给容器中添加组件的几种方法：</span><br><span class="line">1.针对于自己写的类：包扫描+组件定义(@Component @Repository @Service @Controller)</span><br><span class="line">2.针对于不是自己写的类 如第三方导入时：@Configuration &amp; @Bean</span><br><span class="line">3.针对于不是自己写的类 如第三方导入时 若通过Bean导入 还需要给实体类添加无参构造器 较为复杂</span><br><span class="line">  同样可以快速为容器中导入一个组件：@Import(&#123;&#125;)</span><br><span class="line">  1.@Import(要导入的组件) 容器中就会自动注册这个组件 id默认为全类名    见7.3.1</span><br><span class="line">  2.采用ImportSelector：返回需要导入的组件的全类名数组    见7.3.2</span><br><span class="line">  3.采用ImportBeanDefinitionRegistrar：手动注册bean到ioc容器中</span><br><span class="line">4.使用Spring提供的FactoryBean(工厂bean)注册组件：</span><br><span class="line">  1.默认获取到的是工厂bean调用getObject创建的对象    </span><br><span class="line">      即通过context.getBean(&quot;colorFatoryBean&quot;) 获取到的是Color类的对象</span><br><span class="line">  2.要获取工厂bean本身 需要给id前加一个&amp; 即context.getBean(&quot;&amp;colorFatoryBean&quot;)</span><br><span class="line">    </span><br></pre></td></tr></table></div></figure>

<p><strong>7.3.1</strong> 在配置类上方添加@Import</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(&#123;Color.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p><strong>7.3.2</strong> 自定义ImportSelector类</p>
<ul>
<li>编写两个pojo实体类</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Red</span></span>&#123;&#125;</span><br></pre></td></tr></table></div></figure>

<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Yellow</span></span>&#123;&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>编写MyImportSelector类实现ImportSelector接口</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义逻辑返回需要导入的组件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImportSelector</span> <span class="keyword">implements</span> <span class="title">ImportSelector</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line"><span class="comment">//    返回值 就是导入到容器中的组件全类名 会自动添加到ioc容器中 不可以为null 但可以是空数组</span></span><br><span class="line"><span class="comment">//    AnnotationMetadata：当前标注@Import注解的类的全部注解信息</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) &#123;</span><br><span class="line">        </span><br><span class="line"><span class="comment">//    可以通过importingClassMetadata.getXXX() 可以通过importingClassMetadata获取多个属性</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">//        将 Red 和 Yellow 添加到ioc容器中（要写全类名）</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> String[]&#123;<span class="string">&quot;indi.zhihuali.pojo.Red&quot;</span>,<span class="string">&quot;indi.zhihuali.pojo.Yellow&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>利用@Import添加MyImportSelector类</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Import(&#123;Color.class, MyImportSelector.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyConfig2</span> </span>&#123;&#125;</span><br></pre></td></tr></table></div></figure>



<p><strong>Tips：</strong>全类名的快速获取：</p>
<p>可以右键单击要复制全类名的类-&gt;copy-&gt;copy reference后 <strong>输入双引号</strong>并在其中ctrl+v 即可快速复制全类名</p>
<p>测试获取ioc容器中的所有bean 结果为：</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalCommonAnnotationProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerFactory</span><br><span class="line">myConfig2</span><br><span class="line">indi.zhihuali.pojo.Color</span><br><span class="line">indi.zhihuali.pojo.Red</span><br><span class="line">indi.zhihuali.pojo.Yellow</span><br><span class="line">bill</span><br></pre></td></tr></table></div></figure>

<p>可以看到Red和Yellow都被注册进去了</p>
<p><strong>7.3.3</strong> 自定义ImportBeanDefinitionRegistrar类实现ImportBeanDefinitionRegistrar接口</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyImportBeanDefinitionRegistrar</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span></span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * AnnotationMetadata:当前类的注解信息 可以获取类的若干信息</span></span><br><span class="line"><span class="comment">    * BeanDefinitionRegistry：BeanDefinition注册类 将所有需要添加的bean</span></span><br><span class="line"><span class="comment">    * 通过调用</span></span><br><span class="line"><span class="comment">    *  registry.registerBeanDefinition() 手工注册到ioc中</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry,</span></span></span><br><span class="line"><span class="function"><span class="params">                                         BeanNameGenerator importBeanNameGenerator)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//        判断容器中是否有名为Red和Yellow的bean 若有则将rainbow也注册进ioc中</span></span><br><span class="line">        <span class="keyword">boolean</span> red = registry.containsBeanDefinition(<span class="string">&quot;indi.zhihuali.pojo.Red&quot;</span>);</span><br><span class="line">        <span class="keyword">boolean</span> yellow = registry.containsBeanDefinition(<span class="string">&quot;indi.zhihuali.pojo.Yellow&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(red &amp;&amp; yellow)&#123;</span><br><span class="line"><span class="comment">//            指定bean的定义信息 （类型 Scope等）</span></span><br><span class="line">            RootBeanDefinition rootBeanDefinition = <span class="keyword">new</span> RootBeanDefinition(Rainbow.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//            注册一个bean 指定bean名</span></span><br><span class="line"><span class="comment">//            registerBeanDefinitions(importingClassMetadata, registry);</span></span><br><span class="line"><span class="comment">//              importingClassMetadata bean名字 </span></span><br><span class="line"><span class="comment">//              registry 指定bean的定义信息 （类型 Scope等）       </span></span><br><span class="line">   </span><br><span class="line">            registry.registerBeanDefinition(<span class="string">&quot;rainbow&quot;</span>, rootBeanDefinition);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<p>测试所得</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">myConfig2</span><br><span class="line">indi.zhihuali.pojo.Color</span><br><span class="line">indi.zhihuali.pojo.Red</span><br><span class="line">indi.zhihuali.pojo.Yellow</span><br><span class="line">bill</span><br><span class="line">rainbow</span><br></pre></td></tr></table></div></figure>

<p>**7.4 ** 自定义FactoryBean类</p>
<ul>
<li>自定义ColorFactoryBean实现FactoryBean接口</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> indi.zhihuali.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.FactoryBean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zhihua.li</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020/9/18 - 8:06</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ColorFactoryBean</span> <span class="keyword">implements</span> <span class="title">FactoryBean</span>&lt;<span class="title">Color</span>&gt; </span>&#123;</span><br><span class="line"><span class="comment">//    返回一个Color对象 这个对象会添加到容器中</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Color <span class="title">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//      在对象被创建时打印标志语句</span></span><br><span class="line">        System.out.println(<span class="string">&quot;get it&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Color();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    返回对象的类型</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() &#123;</span><br><span class="line">        <span class="keyword">return</span> Color.class;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    设置对象是否单例：</span></span><br><span class="line"><span class="comment">//    true：单例 在容器中只保存一份</span></span><br><span class="line"><span class="comment">//    false：多例  每次获取都会创建一个新的</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSingleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>在配置类中注入定义的类</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ColorFactoryBean <span class="title">colorFactoryBean</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> ColorFactoryBean();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>测试ioc容器中bean情况</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testComponent04</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"><span class="comment">//        封装了获取bean的方法</span></span><br><span class="line">        getAllBeans(context);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></div></figure>

<ul>
<li>测试结果</li>
</ul>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myConfig2</span><br><span class="line">indi.zhihuali.pojo.Color</span><br><span class="line">indi.zhihuali.pojo.Red</span><br><span class="line">indi.zhihuali.pojo.Yellow</span><br><span class="line">bill</span><br><span class="line">colorFactoryBean</span><br><span class="line">rainbow</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>可以发现ioc容器中存在一个名为colorFactoryBean的bean 可定义FactoryBean就是为了注入Color类的bean</p>
<p>对此进行测试 获取名为ColorFactoryBean的bean的对象并通过反射获取其运行时类</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object bean = context.getBean(<span class="string">&quot;colorFactoryBean&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;不明类型的bean为：&quot;</span>+bean.getClass());</span><br></pre></td></tr></table></div></figure>

<p>输出结果为：</p>
<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不明类型的bean为：class indi.zhihuali.pojo.Color</span><br></pre></td></tr></table></div></figure>

<p>可见 虽然其名字为colorFactoryBean 但实际上调用getBean方法时获取到的还是Color对象</p>
</li>
<li><p>是否为单例？</p>
</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Object bean1 = context.getBean(<span class="string">&quot;colorFactoryBean&quot;</span>);</span><br><span class="line">Object bean2 = context.getBean(<span class="string">&quot;colorFactoryBean&quot;</span>);    </span><br><span class="line">System.out.println(bean1 == bean2);</span><br></pre></td></tr></table></div></figure>

<figure class="highlight text"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">true</span><br></pre></td></tr></table></div></figure>

<ul>
<li><p>如果获取到colorFactoryBean类本身对象呢？</p>
<p>通过给getBean参数前加一个&amp;即可获得其本身bean</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BeanFactory</span> </span>&#123;</span><br><span class="line"><span class="comment">/*   * Used to dereference a &#123;@link FactoryBean&#125; instance and distinguish it from</span></span><br><span class="line"><span class="comment">     * beans &lt;i&gt;created&lt;/i&gt; by the FactoryBean. For example, if the bean named</span></span><br><span class="line"><span class="comment">     * &#123;@code myJndiObject&#125; is a FactoryBean, getting &#123;@code &amp;myJndiObject&#125;</span></span><br><span class="line"><span class="comment">     * will return the factory, not the instance returned by the factory.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">        String FACTORY_BEAN_PREFIX = <span class="string">&quot;&amp;&quot;</span>;</span><br><span class="line">        ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>



</li>
</ul>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Object bean = context.getBean(<span class="string">&quot;colorFactoryBean&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;不明类型的bean为：&quot;</span>+bean.getClass());</span><br><span class="line">      Object bean2 = context.getBean(<span class="string">&quot;&amp;colorFactoryBean&quot;</span>);</span><br><span class="line">      System.out.println(<span class="string">&quot;添加了&amp;后获取到的bean为：&quot;</span>+bean2.getClass());</span><br></pre></td></tr></table></div></figure>

<p>​        输出结果为：</p>
<figure class="highlight java"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">不明类型的bean为：<span class="class"><span class="keyword">class</span> <span class="title">indi</span>.<span class="title">zhihuali</span>.<span class="title">pojo</span>.<span class="title">Color</span></span></span><br><span class="line"><span class="class">添加了&amp;后获取到的<span class="title">bean</span>为：<span class="title">class</span> <span class="title">indi</span>.<span class="title">zhihuali</span>.<span class="title">pojo</span>.<span class="title">ColorFactoryBean</span></span></span><br></pre></td></tr></table></div></figure></div><footer class="post-footer"><div class="post-ending ending"><div class="ending__text">------ END ------</div></div><div class="post-copyright copyright"><div class="copyright-author"><span class="copyright-author__name">Author: </span><span class="copyright-author__value"><a href="https://zhihuali.cn">Zhihua Li</a></span></div><div class="copyright-link"><span class="copyright-link__name">Link: </span><span class="copyright-link__value"><a href="https://zhihuali.cn/2020/09/18/Untitled/">https://zhihuali.cn/2020/09/18/Untitled/</a></span></div><div class="copyright-notice"><span class="copyright-notice__name">Copyright: </span><span class="copyright-notice__value">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" rel="external nofollow" target="_blank">BY-NC-SA</a> unless stating additionally</span></div></div><div class="post-tags"><span class="post-tags-item"><span class="post-tags-item__icon"><i class="fas fa-tag"></i></span><a class="post-tags-item__link" href="https://zhihuali.cn/tags/Java/">Java</a></span></div><nav class="post-paginator paginator"><div class="paginator-prev"><a class="paginator-prev__link" href="/2020/09/19/%E3%80%90Spring%E6%B3%A8%E8%A7%A3%E3%80%9102-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"><span class="paginator-prev__icon"><i class="fas fa-angle-left"></i></span><span class="paginator-prev__text">【Spring注解】02-生命周期</span></a></div><div class="paginator-next"><a class="paginator-next__link" href="/2020/09/03/%E3%80%90SpringMVC%E3%80%91%E6%8B%A6%E6%88%AA%E5%99%A8/"><span class="paginator-prev__text">【SpringMVC】拦截器</span><span class="paginator-next__icon"><i class="fas fa-angle-right"></i></span></a></div></nav></footer></div></div></div><div class="sidebar-wrap" id="sidebar-wrap"><aside class="sidebar" id="sidebar"><div class="sidebar-nav"><span class="sidebar-nav-toc current">Catalog</span><span class="sidebar-nav-ov">Overview</span></div><section class="sidebar-toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Spring-%E6%B3%A8%E8%A7%A3%E9%A9%B1%E5%8A%A8%E5%BC%80%E5%8F%91%E3%80%90%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC%E3%80%91"><span class="toc-number">1.</span> <span class="toc-text">
          Spring 注解驱动开发【属性赋值】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%EF%BC%9A%E6%B3%A8%E8%A7%A3%E6%89%AB%E6%8F%8F%E6%8C%87%E5%AE%9A%E5%8C%85%E4%B8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%B1%BB-%E5%A6%82%E6%9E%9C%E6%BB%A1%E8%B6%B3%E6%94%BE%E8%A1%8C%E6%9D%A1%E4%BB%B6%E5%88%99%E8%BF%9B%E8%A1%8C%E6%94%BE%E8%A1%8C-%E5%90%A6%E5%88%99%E5%B0%B1%E6%8B%A6%E6%88%AA"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">
          注：注解扫描指定包下的所有类 如果满足放行条件则进行放行 否则就拦截</span></a></li></ol></li></ol></li></ol></li></ol></section><!-- ov = overview--><section class="sidebar-ov hide"><div class="sidebar-ov-author"><div class="sidebar-ov-author__avatar"><img class="sidebar-ov-author__avatar_img" src="https://s1.ax1x.com/2020/09/08/wML7Fg.png" alt="avatar"></div><p class="sidebar-ov-author__text">今朝欢愉 明日何处</p></div><div class="sidebar-ov-social"><a class="sidebar-ov-social-item" href="https://github.com/lizhihua2034/lizhihua2034.github.io" target="_blank" rel="noopener" data-popover="Github" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-github"></i></span></a><a class="sidebar-ov-social-item" href="https://plus.google.com/" target="_blank" rel="noopener" data-popover="Google" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-google"></i></span></a><a class="sidebar-ov-social-item" href="https://twitter.com/" target="_blank" rel="noopener" data-popover="Twitter" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-twitter"></i></span></a><a class="sidebar-ov-social-item" href="https://youtube.com/" target="_blank" rel="noopener" data-popover="Youtube" data-popover-pos="up"><span class="sidebar-ov-social-item__icon"><i class="fab fa-youtube"></i></span></a></div><div class="sidebar-ov-cc"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener" data-popover="Creative Commons" data-popover-pos="up"><img src="/images/cc-by-nc-sa.svg"></a></div></section><div class="sidebar-reading"><div class="sidebar-reading-info"><span class="sidebar-reading-info__text">You have read </span><span class="sidebar-reading-info__num">0</span></div><div class="sidebar-reading-line"></div></div></aside></div><div class="clearfix"></div></div></main><footer class="footer" id="footer"><div class="footer-inner"><div><span>Copyright © 2020</span><span class="footer__icon"><i class="fas fa-heart"></i></span><span>Zhihua Li</span></div><div><span>Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a></span><span> v5.0.2</span><span class="footer__devider">|</span><span>Theme - <a href="https://github.com/liuyib/hexo-theme-stun/" title="Stun" target="_blank" rel="noopener">Stun</a></span><span> v2.1.1</span></div></div></footer><div class="loading-bar" id="loading-bar"><div class="loading-bar__progress"></div></div><div class="back2top" id="back2top"><span class="back2top__icon"><i class="fas fa-rocket"></i></span></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@v3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.2/velocity.ui.min.js"></script><script src="/js/utils.js?v=2.1.1"></script><script src="/js/stun-boot.js?v=2.1.1"></script><script src="/js/scroll.js?v=2.1.1"></script><script src="/js/header.js?v=2.1.1"></script><script src="/js/sidebar.js?v=2.1.1"></script></body></html>